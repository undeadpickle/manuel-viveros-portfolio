# Internationalization (i18n) Guide

## Overview

The site supports two languages:
- **English (en)** - Default language
- **Spanish (es)** - Español

## URL Structure

| Page | English | Spanish |
|------|---------|---------|
| Home | `/en` | `/es` |
| Paintings | `/en/paintings` | `/es/pinturas` |
| Sculptures | `/en/sculptures` | `/es/esculturas` |
| Sketches | `/en/sketches` | `/es/bocetos` |
| Photography | `/en/photography` | `/es/fotografia` |
| Journals | `/en/journals` | `/es/diario` |
| Journal Entry | `/en/journals/[slug]` | `/es/diario/[slug]` |
| Contact | `/en/contact` | `/es/contacto` |

## How It Works

### Middleware (src/middleware.ts)
- Intercepts all requests
- If no locale in URL, redirects to `/en/...`
- Allows `/studio` route to bypass (for Sanity)

### Route Segments
The `[lang]` dynamic segment captures the locale:
```
src/app/[lang]/page.tsx           → /en or /es
src/app/[lang]/paintings/page.tsx → /en/paintings or /es/pinturas
```

### Language Toggle
Component switches between languages while preserving the current page:
```typescript
import { getAlternatePath } from '@/lib/i18n'

const { locale, path } = getAlternatePath(currentLocale, currentPath)
// If on /en/paintings → returns { locale: 'es', path: '/es/pinturas' }
```

## Content Localization

### UI Strings (Dictionaries)
Static UI text is stored in JSON files:
- `src/dictionaries/en.json`
- `src/dictionaries/es.json`

Usage in components:
```typescript
import { getDictionary } from '@/dictionaries'

export default async function Page({ params }) {
  const { lang } = await params
  const dict = await getDictionary(lang)

  return <h1>{dict.home.featuredWork}</h1>
}
```

### CMS Content (Sanity)
All content fields have bilingual structure:
```typescript
// In Sanity
title: {
  en: "Sunset Over the Mountains",
  es: "Atardecer Sobre las Montañas"
}
```

Usage in components:
```typescript
import { getLocalizedValue } from '@/lib/i18n'

const title = getLocalizedValue(artwork.title, lang)
// Returns English or Spanish based on lang
// Falls back to en if es is missing, or vice versa
```

## Adding a New Language

1. **Update locales array** (`src/lib/i18n.ts`):
```typescript
export const locales = ['en', 'es', 'pt'] as const
```

2. **Add route mappings** (`src/lib/i18n.ts`):
```typescript
export const routeMap = {
  // ... existing
  pt: {
    home: '',
    paintings: 'pinturas',
    sculptures: 'esculturas',
    // ... etc
  }
}
```

3. **Create dictionary** (`src/dictionaries/pt.json`):
```json
{
  "nav": {
    "home": "Início",
    "paintings": "Pinturas",
    // ...
  }
}
```

4. **Update dictionary loader** (`src/dictionaries/index.ts`):
```typescript
const dictionaries = {
  en: () => import('./en.json').then((m) => m.default),
  es: () => import('./es.json').then((m) => m.default),
  pt: () => import('./pt.json').then((m) => m.default),
}
```

5. **Update Sanity schemas** - Add `pt` field to all localized content:
```typescript
fields: [
  { name: 'en', type: 'string', title: 'English' },
  { name: 'es', type: 'string', title: 'Español' },
  { name: 'pt', type: 'string', title: 'Português' },
]
```

6. **Update metadata** (`src/app/[lang]/layout.tsx`):
- Add titles and descriptions for new language
- Update OpenGraph locale settings

## SEO Considerations

### Hreflang Tags
Add alternate language links in layout:
```tsx
<head>
  <link rel="alternate" hreflang="en" href="https://site.com/en/..." />
  <link rel="alternate" hreflang="es" href="https://site.com/es/..." />
  <link rel="alternate" hreflang="x-default" href="https://site.com/en/..." />
</head>
```

### Sitemap
Generate localized sitemap entries:
```xml
<url>
  <loc>https://site.com/en/paintings</loc>
  <xhtml:link rel="alternate" hreflang="en" href="https://site.com/en/paintings"/>
  <xhtml:link rel="alternate" hreflang="es" href="https://site.com/es/pinturas"/>
</url>
```

## Best Practices

1. **Always provide fallbacks** - Use `getLocalizedValue()` which falls back gracefully
2. **Keep dictionaries in sync** - When adding UI strings, update all language files
3. **Test both languages** - Navigate through all pages in both EN and ES
4. **Consistent slugs** - Journal/artwork slugs are shared across languages (only the path prefix changes)
